<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zasodev AutoMind</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: radial-gradient(circle at top, #111, #05050a);
      color: white;
      text-align: center;
    }

    header {
      padding: 60px 20px 30px;
    }

    header h1 {
      font-size: 3.2rem;
      margin: 0;
      font-weight: 800;
      background: linear-gradient(to right, lime, cyan);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    header p {
      color: #aaa;
      font-size: 1.1rem;
      margin-top: 12px;
    }

    .navbar {
      display: flex;
      justify-content: center;
      gap: 14px;
      flex-wrap: wrap;
      margin-top: 25px;
    }

    .navBtn {
      background: limegreen;
      color: black;
      border: none;
      padding: 10px 18px;
      border-radius: 14px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.2s;
    }

    .navBtn:hover {
      transform: scale(1.05);
      background: #00ff88;
    }

    .box {
      margin: auto;
      margin-top: 40px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      width: 90%;
      max-width: 950px;
      padding: 35px;
      border-radius: 22px;
      box-shadow: 0 0 35px rgba(0,255,120,0.08);
    }

    input {
      width: 90%;
      max-width: 650px;
      padding: 14px;
      border-radius: 14px;
      border: none;
      outline: none;
      font-size: 16px;
      margin-top: 12px;
      background: #111;
      color: white;
      border: 1px solid rgba(255,255,255,0.15);
    }

    button {
      margin-top: 18px;
      padding: 14px 30px;
      border: none;
      border-radius: 16px;
      font-size: 15px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.2s;
    }

    .scanBtn {
      background: limegreen;
      color: black;
    }

    .scanBtn:hover {
      transform: scale(1.05);
      background: #00ff88;
    }

    .quickBtns {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
    }

    .quickBtns button {
      background: #222;
      color: lime;
      border: 1px solid lime;
      padding: 9px 14px;
      border-radius: 14px;
      font-size: 13px;
    }

    .result {
      margin-top: 30px;
      text-align: left;
      background: rgba(0,0,0,0.35);
      padding: 25px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.08);
    }

    .severityBox {
      padding: 10px;
      border-radius: 12px;
      font-weight: bold;
      display: inline-block;
      margin-top: 10px;
    }

    /* PREMIUM REPORT STYLING */
    .prettyReport h3 {
      color: lime;
      margin-top: 20px;
      font-size: 1.25rem;
      border-bottom: 1px solid rgba(0,255,120,0.3);
      padding-bottom: 6px;
    }

    .prettyReport ul {
      margin-left: 22px;
      margin-top: 10px;
    }

    .prettyReport li {
      margin-bottom: 10px;
      line-height: 1.6;
      color: #ddd;
    }

    .codeTag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 10px;
      background: rgba(0,255,120,0.15);
      border: 1px solid lime;
      color: lime;
      font-weight: bold;
      font-size: 0.9rem;
    }

    footer {
      margin-top: 60px;
      padding: 25px;
      font-size: 0.9rem;
      color: #666;
    }
  </style>
</head>

<body>

<header>
  <h1>ðŸš— Zasodev AutoMind</h1>
  <p>AI-powered car diagnostics â€” instant mechanic-style reports.</p>
</header>

<div class="box">
  <h2>Describe Your Issue</h2>

  <input id="carInfo" placeholder="Vehicle Info (Year / Model / Mileage)">
  <input id="obdCode" placeholder="OBD2 Code (Optional: P0300, P0171)">
  <input id="userInput" placeholder="Describe symptoms here...">

  <div class="quickBtns">
    <button onclick="quickFill('Car wonâ€™t start')">Wonâ€™t Start</button>
    <button onclick="quickFill('Engine misfire at idle')">Misfire</button>
    <button onclick="quickFill('Car overheating')">Overheating</button>
    <button onclick="quickFill('Loud bang then slapping noise')">Bang/Slap</button>
    <button onclick="quickFill('Fuel smell or leaking gas')">Fuel Leak</button>
  </div>

  <button class="scanBtn" onclick="runScan()">ðŸ¤– Run AutoMind AI Scan</button>

  <div id="output">
    <div class="result">
      <h2>ðŸ¤– AutoMind Diagnostic Report</h2>

      <div class="severityBox" style="background:red;color:black;">
        ðŸ”´ STOP DRIVING IMMEDIATELY
      </div>

      <div class="prettyReport">
        <h3>Likely Causes</h3><br>1. <b style="color:lime;">Rod Knock</b>: A loud banging followed by knocking sounds could indicate a rod knock, which usually signifies a severe problem with the engine's internals.<br>2. <b style="color:lime;">Dropped Valve Seat</b>: A loud bang could suggest a valve has dropped or a valve seat has come loose, potentially leading to severe engine damage.<br>3. <b style="color:lime;">Piston Damage</b>: The loud bang might have resulted from a piston hitting another component, suggesting a serious internal engine failure.<br>4. <b style="color:lime;">Broken Connecting Rod</b>: The sound could indicate a broken connecting rod, which can prevent the engine from starting.<br>5. <b style="color:lime;">Timing Chain/Belt Failure</b>: If the timing mechanism failed, it could lead to catastrophic engine failure, resulting in a no-start condition.<br>6. <b style="color:lime;">Fuel System Issues</b>: While less likely given the described symptoms, a sudden fuel pump failure or fuel system issue may still contribute to the no-start condition.<br><br><h3>Checklist</h3><br>1. <b style="color:lime;">Listen for Noises</b>: Crank the engine and listen for any unusual sounds (knocks, bangs).<br>2. <b style="color:lime;">Inspect Engine Oil</b>: Check the oil level and condition. Look for metal shavings or contaminants.<br>3. <b style="color:lime;">Check for Fuel and Spark</b>:<br>   <ul><li>Test fuel pressure to ensure fuel is reaching the engine.</li><br>   <li>Check spark plugs for condition and functioning properly.</li><br>4. <b style="color:lime;">Inspect for Codes</b>: Use an OBD-II scanner to check for any active trouble codes.<br>5. <b style="color:lime;">Visual Inspection</b>: Look for any obvious damage around the engine, including the timing cover and accessories.<br>6. <b style="color:lime;">Check Battery and Connections</b>: Ensure the battery has sufficient voltage and all connections are tight.<br><br><h3>Repair Cost</h3><br><li><b style="color:lime;">Rod Knock or Broken Connecting Rod</b>: $1500 - $5000 (depending on damage extent).</li><br><li><b style="color:lime;">Valve Seat Replacement</b>: $1000 - $3000.</li><br><li><b style="color:lime;">Complete Engine Replacement or Rebuild</b>: $3000 - $7000.</li><br><li><b style="color:lime;">Fuel System Repair</b>: $500 - $1500.</li><br><li><b style="color:lime;">General Diagnostics</b>: $100 - $200 (if bringing to a mechanic).</li></ul><br><br><h3>Follow-Up Questions</h3><br>1. <b style="color:lime;">What was the engine temperature before the noise occurred?</b><br>2. <b style="color:lime;">Had you noticed any symptoms (like knocking, overheating, or loss of power) prior to the event?</b><br>3. <b style="color:lime;">Have there been any recent repairs or modifications to the engine?</b><br>4. <b style="color:lime;">Do you have any OBD-II trouble codes?</b><br>5. <b style="color:lime;">Did you smell any unusual odors (like burning oil) after the noise?</b><br>6. <b style="color:lime;">Was the car consuming oil or making any unusual noises before the loud bang?</b>
      </div>
    </div>
  </div>
</div>

<footer>
  Zasodev AutoMind v2 â€” Built by Zasodev Dev Labs âš¡
</footer>

<script>
function quickFill(text) {
  document.getElementById("userInput").value = text;
}

/* Markdown â†’ Pretty HTML */
function formatReport(text) {
  return text
    .replace(/###\s?(.*)/g, "<h3>$1</h3>")
    .replace(/\*\*(.*?)\*\*/g, "<b style='color:lime;'>$1</b>")
    .replace(/P0\d{3,4}/g, match => `<span class="codeTag">${match}</span>`)
    .replace(/-\s(.*)/g, "<li>$1</li>")
    .replace(/(<li>.*<\/li>)/gs, "<ul>$1</ul>")
    .replace(/\n/g, "<br>");
}

/* âœ… FIXED SEVERITY SYSTEM */
function getSeverity(symptoms) {
  symptoms = symptoms.toLowerCase();

  // ðŸ”´ Critical Engine Damage
  if (
    symptoms.includes("bang") ||
    symptoms.includes("knock") ||
    symptoms.includes("slapping") ||
    symptoms.includes("rod") ||
    symptoms.includes("piston") ||
    symptoms.includes("timing chain") ||
    symptoms.includes("engine seized") ||
    symptoms.includes("blown engine")
  ) {
    return { text: "ðŸ”´ STOP DRIVING IMMEDIATELY", color: "red" };
  }

  // ðŸ”´ Fire / Fuel Hazard
  if (
    symptoms.includes("fuel leak") ||
    symptoms.includes("gas leak") ||
    symptoms.includes("fuel dripping") ||
    symptoms.includes("smoke") ||
    symptoms.includes("fire")
  ) {
    return { text: "ðŸ”´ EXTREME FIRE RISK", color: "red" };
  }

  // ðŸŸ¡ Serious Issues
  if (
    symptoms.includes("misfire") ||
    symptoms.includes("overheating") ||
    symptoms.includes("stalling") ||
    symptoms.includes("limp mode") ||
    symptoms.includes("transmission slipping")
  ) {
    return { text: "ðŸŸ¡ Needs Attention Soon", color: "orange" };
  }

  // ðŸŸ¢ Minor
  return { text: "ðŸŸ¢ Likely Safe (Monitor)", color: "lime" };
}

/* MAIN AI SCAN */
async function runScan() {
  const symptoms = document.getElementById("userInput").value;
  const carInfo = document.getElementById("carInfo").value;
  const code = document.getElementById("obdCode").value;

  if (!symptoms) return alert("Type symptoms first.");

  const severity = getSeverity(symptoms);

  document.getElementById("output").innerHTML = `
    <div class="result">
      <p style="color:#aaa;">ðŸ¤– Running AI Diagnostic...</p>
    </div>
  `;

  const prompt = `
Vehicle Info: ${carInfo}
OBD Code: ${code}
Symptoms: ${symptoms}

Return formatted report with:
### Likely Causes
### Checklist
### Repair Cost
### Follow-Up Questions
`;

  const res = await fetch(
    "https://zasodev-automind-ai.anthonylogalbo38.workers.dev/",
    {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({ text: prompt })
    }
  );

  const data = await res.json();

  document.getElementById("output").innerHTML = `
    <div class="result">
      <h2>ðŸ¤– AutoMind Diagnostic Report</h2>

      <div class="severityBox" style="background:${severity.color};color:black;">
        ${severity.text}
      </div>

      <div class="prettyReport">
        ${formatReport(data.reply)}
      </div>
    </div>
  `;
}
</script>



</body></html>
